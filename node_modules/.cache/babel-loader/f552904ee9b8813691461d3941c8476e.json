{"ast":null,"code":"import _objectSpread from \"D:\\\\Workspace\\\\ci-tools-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"D:\\\\Workspace\\\\ci-tools-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Workspace\\\\ci-tools-master\\\\frontend\\\\src\\\\views\\\\Login.jsx\";\nimport React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { ToastContainer } from 'react-toastify';\nimport { doLogin } from 'api';\nimport { tokenName, userName } from 'api/const';\nimport { errorNoti } from \"components/Notifi\";\nimport { registerURL } from \"config\";\nimport loginBackgroundImg from \"assets/img/login-bg.jpg\";\nexport default function Login(props) {\n  const _React$useState = React.useState({\n    username: localStorage.getItem(userName)\n  }),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        loginForm = _React$useState2[0],\n        setLoginFrom = _React$useState2[1];\n\n  const _React$useState3 = React.useState(\"\"),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        path = _React$useState4[0],\n        setPath = _React$useState4[1];\n\n  const handle_login = e => {\n    e.preventDefault();\n    doLogin(loginForm).then(res => {\n      if (res.status === 200) {\n        localStorage.setItem(tokenName, res.data.token);\n        localStorage.setItem(userName, res.data.user.username);\n\n        if (props.location.state) {\n          setPath(props.location.state.from);\n        } else {\n          setPath(\"/\");\n        }\n      }\n    }).catch(e => {\n      errorNoti(\"Invalid user or password\");\n    });\n  };\n\n  const loginBackground = {\n    backgroundImage: \"url(\" + loginBackgroundImg + \")\"\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: loginBackground,\n    className: \"login-bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-bg-mask\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"login-form\",\n    onSubmit: e => handle_login(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    type: \"text\",\n    placeholder: \"username\",\n    onChange: e => setLoginFrom(_objectSpread({}, loginForm, {\n      username: e.target.value\n    })),\n    defaultValue: localStorage.getItem(userName),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    type: \"password\",\n    placeholder: \"password\",\n    onChange: e => setLoginFrom(_objectSpread({}, loginForm, {\n      password: e.target.value\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 15\n    }\n  }, \"login\"))), path && /*#__PURE__*/React.createElement(Redirect, {\n    to: path,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }))));\n}","map":{"version":3,"names":["React","Redirect","ToastContainer","doLogin","tokenName","userName","errorNoti","registerURL","loginBackgroundImg","Login","props","useState","username","localStorage","getItem","loginForm","setLoginFrom","path","setPath","handle_login","e","preventDefault","then","res","status","setItem","data","token","user","location","state","from","catch","loginBackground","backgroundImage","target","value","password"],"sources":["D:/Workspace/ci-tools-master/frontend/src/views/Login.jsx"],"sourcesContent":["import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { ToastContainer } from 'react-toastify';\nimport { doLogin } from 'api'\nimport { tokenName, userName } from 'api/const'\nimport { errorNoti } from \"components/Notifi\"\nimport { registerURL } from \"config\";\n\nimport loginBackgroundImg from \"assets/img/login-bg.jpg\";\n\nexport default function Login(props) {\n  const [loginForm, setLoginFrom] = React.useState({\n    username: localStorage.getItem(userName)\n  })\n  const [path, setPath] = React.useState(\"\")\n  const handle_login = (e) => {\n    e.preventDefault();\n    doLogin(loginForm)\n    .then(res => {\n      if (res.status === 200) {\n        localStorage.setItem(tokenName, res.data.token);\n        localStorage.setItem(userName, res.data.user.username);\n        if (props.location.state) {\n          setPath(props.location.state.from);\n        } else {\n          setPath(\"/\")\n        }\n    }})\n    .catch(e => {\n      errorNoti(\"Invalid user or password\")\n    })\n  };\n\n  const loginBackground = {\n    backgroundImage: \"url(\" + loginBackgroundImg + \")\"\n  };\n\n  return (\n    <div style={loginBackground} className=\"login-bg\">\n      <div className=\"login-bg-mask\">\n        <div className=\"login-page\">\n          <ToastContainer/>\n          <div className=\"form\">\n            <form className=\"login-form\" onSubmit={e => handle_login(e)}>\n              <input required type=\"text\" placeholder=\"username\"\n                onChange={e => setLoginFrom({...loginForm, username: e.target.value})}\n                defaultValue={localStorage.getItem(userName)}\n              />\n              <input required type=\"password\" placeholder=\"password\"\n                onChange={e => setLoginFrom({...loginForm, password: e.target.value})}\n              />\n              <button type=\"submit\">login</button>\n              {/* <a href={registerURL}>Create account</a> */}\n            </form>\n          </div>\n          { path && <Redirect to={path}/>}\n        </div>\n      </div>\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}