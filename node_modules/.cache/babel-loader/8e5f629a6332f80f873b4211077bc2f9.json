{"ast":null,"code":"import _slicedToArray from \"D:\\\\Workspace\\\\ci-tools-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Workspace\\\\ci-tools-master\\\\frontend\\\\src\\\\components\\\\Monitoring\\\\MonitoringDetail\\\\MonitoringDetail.jsx\";\nimport React from 'react';\nimport { historyUrlMonitoring } from \"../../../config\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { Grid } from \"react-bootstrap\";\nimport Card from \"../../Card/Card\";\nimport { tokenName } from \"../../../api/const\";\nimport { getMonitoringResponse, getMonitoringResult } from '../../../api';\nimport { Breadcrumbs, Link } from \"@material-ui/core\";\nimport { ImHome } from 'react-icons/im';\nimport \"./MonitoringDetail.css\";\nimport MonitoringStatusDetail from \"./MonitoringStatusDetail\";\nimport MonitoringChart from \"./MonitoringChart\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.paper,\n    width: '100%',\n    flexGrow: 1\n  },\n  link: {\n    display: 'flex',\n    fontSize: 22\n  }\n}));\n\nfunction MonitoringDetail() {\n  let idTaskDetail = document.URL.slice(document.URL.lastIndexOf(\"/\") + 1);\n  const classes = useStyles();\n\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        value = _React$useState2[0],\n        setValue = _React$useState2[1];\n\n  const _React$useState3 = React.useState({}),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        dataRes = _React$useState4[0],\n        setData = _React$useState4[1];\n\n  const _React$useState5 = React.useState(0),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        avg = _React$useState6[0],\n        setAvg = _React$useState6[1];\n\n  const _React$useState7 = React.useState(0),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        resNow = _React$useState8[0],\n        setResNow = _React$useState8[1];\n\n  React.useEffect(() => {\n    const tokenUser = localStorage.getItem(tokenName);\n    getMonitoringResult(tokenUser, idTaskDetail, 'GET').then(res => {\n      if (res.status === 200) {\n        setData(res.data);\n      }\n    }); // .catch(e => {\n    //     errorNoti(\"not found Detail\");\n    //     setTimeout(function () {\n    //         window.location.href = historyUrlMonitoring;\n    //     }, 2000);\n    // })\n  }, []);\n  React.useEffect(() => {\n    const tokenUser = localStorage.getItem(tokenName);\n    getMonitoringResponse(tokenUser, idTaskDetail).then(res => {\n      if (res.status === 200) {\n        let total = 0;\n        let avg = 0;\n        let response_time_now = 0;\n        res.data.map((item, key) => {\n          res.data[key].response_time_ms = parseInt(item.response_time * 1000);\n          res.data[key].start_time_hm = item.start_time.substr(11, 5);\n          res.data[key].start_time_full = item.start_time.substr(0, 10) + ' ' + item.start_time.substr(11, 5);\n\n          if (res.data.length !== 0) {\n            total += res.data[key].response_time * 1000;\n            avg = Math.round(total / res.data.length);\n          }\n\n          response_time_now = res.data[res.data.length - 1].response_time_ms;\n        });\n        setValue(res.data);\n        setAvg(avg);\n        setResNow(response_time_now);\n      }\n    }); // .catch(e => {\n    //     errorNoti(\"not found Detail\");\n    //     setTimeout(function () {\n    //         window.location.href = historyUrlMonitoring;\n    //     }, 2000);\n    // })\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fix-breadcrumbs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumbs, {\n    \"aria-label\": \"breadcrumb\",\n    className: \"fixBreadcrumbs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    color: \"inherit\",\n    href: \"/\",\n    className: \"\".concat(classes.link, \" breadcrum-fontset\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ImHome, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }), \" \\xA0Home Page\"), /*#__PURE__*/React.createElement(Link, {\n    color: \"inherit\",\n    href: historyUrlMonitoring,\n    className: \"\".concat(classes.link, \" breadcrum-fontset\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"Monitoring List\"), /*#__PURE__*/React.createElement(Typography, {\n    color: \"textPrimary\",\n    className: \"\".concat(classes.link, \" breadcrum-fontset\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"URL Monitoring Detail\"))), /*#__PURE__*/React.createElement(Grid, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    fluid: true,\n    className: \"col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card // title=\"Result Scan Task\"\n  , {\n    content: /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 40\n      }\n    }, \"Site Name : \", dataRes.sitename), \" \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0 \", /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 127\n      }\n    }, \"Start Date : \", dataRes.timestamp))), /*#__PURE__*/React.createElement(MonitoringStatusDetail, {\n      dataRes: dataRes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(MonitoringChart, {\n      value: value,\n      avg: avg,\n      resNow: resNow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 33\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }))));\n}\n\nexport default MonitoringDetail;","map":{"version":3,"names":["React","historyUrlMonitoring","makeStyles","Typography","Grid","Card","tokenName","getMonitoringResponse","getMonitoringResult","Breadcrumbs","Link","ImHome","MonitoringStatusDetail","MonitoringChart","useStyles","theme","root","backgroundColor","palette","background","paper","width","flexGrow","link","display","fontSize","MonitoringDetail","idTaskDetail","document","URL","slice","lastIndexOf","classes","useState","value","setValue","dataRes","setData","avg","setAvg","resNow","setResNow","useEffect","tokenUser","localStorage","getItem","then","res","status","data","total","response_time_now","map","item","key","response_time_ms","parseInt","response_time","start_time_hm","start_time","substr","start_time_full","length","Math","round","sitename","timestamp"],"sources":["D:/Workspace/ci-tools-master/frontend/src/components/Monitoring/MonitoringDetail/MonitoringDetail.jsx"],"sourcesContent":["import React from 'react'\nimport {historyUrlMonitoring} from \"../../../config\"\nimport {makeStyles} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {Grid} from \"react-bootstrap\";\nimport Card from \"../../Card/Card\";\nimport {tokenName} from \"../../../api/const\";\nimport {getMonitoringResponse, getMonitoringResult} from '../../../api'\nimport {Breadcrumbs, Link} from \"@material-ui/core\";\nimport {ImHome} from 'react-icons/im';\nimport \"./MonitoringDetail.css\"\nimport MonitoringStatusDetail from \"./MonitoringStatusDetail\"\nimport MonitoringChart from \"./MonitoringChart\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        backgroundColor: theme.palette.background.paper,\n        width: '100%',\n        flexGrow: 1\n    },\n    link: {\n        display: 'flex',\n        fontSize: 22\n    }\n}));\n\nfunction MonitoringDetail() {\n    let idTaskDetail = document.URL.slice((document.URL.lastIndexOf(\"/\")) + 1);\n    const classes = useStyles();\n    const [value, setValue] = React.useState([]);\n    const [dataRes, setData] = React.useState({});\n    const [avg, setAvg] = React.useState(0);\n    const [resNow, setResNow] = React.useState(0);\n\n\n    React.useEffect(() => {\n        const tokenUser = localStorage.getItem(tokenName);\n        getMonitoringResult(tokenUser, idTaskDetail, 'GET')\n            .then(res => {\n                if (res.status === 200) {\n                    setData(res.data)\n                }\n            })\n            // .catch(e => {\n            //     errorNoti(\"not found Detail\");\n            //     setTimeout(function () {\n            //         window.location.href = historyUrlMonitoring;\n            //     }, 2000);\n            // })\n    }, []);\n\n    React.useEffect(() => {\n        const tokenUser = localStorage.getItem(tokenName);\n        getMonitoringResponse(tokenUser,idTaskDetail)\n            .then(res => {\n                if (res.status === 200) {\n                    let total = 0;\n                    let avg = 0;\n                    let response_time_now = 0;\n                    res.data.map((item,key) => {\n                        res.data[key].response_time_ms = parseInt(item.response_time*1000);\n                        res.data[key].start_time_hm = item.start_time.substr(11,5);\n                        res.data[key].start_time_full = item.start_time.substr(0,10) + ' ' + item.start_time.substr(11,5);\n                        if (res.data.length !== 0) {\n                            total += (res.data[key].response_time*1000);\n                            avg = Math.round(total / res.data.length);\n                        }\n                        response_time_now =  res.data[res.data.length -1].response_time_ms ;\n                    });\n                    setValue(res.data);\n                    setAvg(avg);\n                    setResNow(response_time_now);\n                }\n            })\n            // .catch(e => {\n            //     errorNoti(\"not found Detail\");\n            //     setTimeout(function () {\n            //         window.location.href = historyUrlMonitoring;\n            //     }, 2000);\n            // })\n    }, []);\n\n    return (\n        <div className=\"content\">\n            <div className=\"fix-breadcrumbs\">\n                <Breadcrumbs aria-label=\"breadcrumb\" className=\"fixBreadcrumbs\">\n                    <Link color=\"inherit\" href=\"/\" className={`${classes.link} breadcrum-fontset`}>\n                        <ImHome/> &nbsp;Home Page\n                    </Link>\n                    <Link color=\"inherit\" href={historyUrlMonitoring} className={`${classes.link} breadcrum-fontset`}>\n                        Monitoring List\n                    </Link>\n                    <Typography color=\"textPrimary\" className={`${classes.link} breadcrum-fontset`}>URL Monitoring\n                        Detail</Typography>\n                </Breadcrumbs>\n            </div>\n            <Grid fluid>\n                <Grid fluid className=\"col-md-12\">\n                    <Card\n                        // title=\"Result Scan Task\"\n                        content={\n                            <div className={classes.root}>\n                                <div>\n                                    <p><b>Site Name : {dataRes.sitename}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>Start\n                                        Date : {dataRes.timestamp}</b></p>\n                                </div>\n                                <MonitoringStatusDetail dataRes={dataRes}/>\n                                <MonitoringChart value={value} avg={avg} resNow={resNow}/>\n                            </div>\n                        }\n                    >\n                    </Card>\n                </Grid>\n            </Grid>\n        </div>\n    );\n}\n\nexport default MonitoringDetail\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}